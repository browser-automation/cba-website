<%
const query = site.queryPages;
const [currentPage] = query(({pathname}) => page.pathname === pathname);
const currenOriginalPath = currentPage.originalPathname;

const navigation = [];
for (const menuItem of site.menuItems) {
  let topPage = query(({originalPathname}) => originalPathname === menuItem)[0];
  if (menuItem === currenOriginalPath.split("/")[0]) {
    topPage = site.getSubPages(JSON.parse(JSON.stringify(topPage)), ({originalPathname}) => currenOriginalPath.startsWith(originalPathname));
  }
  navigation.push(topPage);
}
%>

<%- include('_renderNavigation', {navigationData: navigation}) %>
