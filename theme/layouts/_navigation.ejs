<% const headerMenuItems = ["documentation", "tutorial", "ready-projects", "what's-new"];
const regularExpression = /\\|\//;
const flyoutPages = site.queryPages(({originalPathname}) => headerMenuItems.includes(originalPathname.split(regularExpression)[0]));

let navigation = [];
let children = [];
let obj = {};
let value = {};

for (const {originalPathname, pathname, title} of flyoutPages) {
  console.log(originalPathname.split('\\')[1], originalPathname.split('\\')[2])
  if (!(originalPathname.split('\\')[1] | !originalPathname.split('\\')[2])) {
    obj = {title, pathname, children};
    orPath = originalPathname;
    for (const {originalPathname, pathname, title} of flyoutPages){
      if (originalPathname == `${orPath}\\${originalPathname.split('\\').pop()}`){
        obj.children.push({title, pathname});
        navigation.push(obj);
        console.log(children);
      }
    }
    } else {
      navigation.push({title, pathname})
    }
};
console.log(navigation);
 %>

 <nav id="main-navigation">
  <% function recNav(navig) { %>
    <ul>
      <% for ({title, link, sub_items} of navig) { %>
        <li <%- sub_items ? "class='has-children'" : "" %>>
          <a href="<%= link %>"><%= title %></a>
            <% if (sub_items) { %>
              <% recNav(sub_items);
            } %>
        </li>
      <% } %>
    </ul>
  <% }
  recNav(site.navigation) %>
</nav>

<nav id="mobile-nav">
<select>
   <% for ({title, link, sub_items} of site.navigation) { %>
      <option value="<%- link %>"><%- title %></option>
    <% } %>
</select>
</nav>
